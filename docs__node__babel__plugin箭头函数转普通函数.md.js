(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[95],{X8x5:function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),l=t.n(a),o=t("dEAq"),r=t("H1Ra"),c=l.a.memo((e=>{e.demos;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"markdown"},l.a.createElement("blockquote",null,l.a.createElement("p",null,"\u771f\u6b63\u7684\u52c7\u8005\u6562\u4e8e\u8fce\u5203\u800c\u4e0a")),l.a.createElement("p",null,"\u9700\u6c42\u4e0b\u9762\u7684\u4ee3\u7801\u8f6c\u6362\u6210\u76ee\u6807\u4ee3\u7801"),l.a.createElement(r["a"],{code:"// before\nvar a = () => console.log(11);\n\n// after\nvar a = function func() {\n  console.log(11);\n};",lang:"js"}),l.a.createElement("p",null,"\u601d\u8def\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u624b\u5199\u8981\u628a\u8981\u8f6c\u6362\u4e4b\u540e\u7684\u4ee3\u7801\u548c\u8f6c\u6362\u524d\u7684\u4ee3\u7801\u653e\u5230",l.a.createElement(o["Link"],{to:"https://astexplorer.net/"},"astexplorer"),"\u597d\u597d\u5206\u6790\u4e24\u8005\u4e4b\u95f4\u7684\u533a\u522b"),l.a.createElement("li",null,"\u901a\u8fc7 path \u8981\u627e\u5230\u8981\u904d\u5386\u7684\u51fd\u6570\u8868\u8fbe\u5f0f ArrowFunctionExpression"),l.a.createElement("li",null,"\u627e\u5230\u4e4b\u540e\uff0c\u6784\u9020\u4e00\u4e2a","{","}","\uff0c\u7136\u540e\u628a\u8fd4\u56de\u8bed\u53e5\u586b\u5145\u5230","{","}"),l.a.createElement("li",null,"\u66ff\u6362\u73b0\u6709\u51fd\u6570\u8868\u8fbe\u5f0f")),l.a.createElement("p",null,l.a.createElement(o["Link"],{to:"https://juejin.cn/post/7040328166832865293"},"\u770b\u5230\u522b\u4eba\u6587\u7ae0")),l.a.createElement(r["a"],{code:"// \u6784\u9020\u51fd\u6570 \u51fd\u6570\u8868\u8fbe\u5f0f\n\nt.functionExpression(id, params, body, generator, async);\n\nAST Node FunctionExpression shape:\n\n- id: Identifier (default: null)\n- params: Array<Identifier | Pattern | RestElement> (required)\n- body: BlockStatement (required)\n- generator: boolean (default: false)\n- async: boolean (default: false)\n\n\n// {} blockStatement\u8bed\u53e5\nt.blockStatement(body, directives);\n- body: Array<Statement> (required)\n- directives: Array<Directive> (default: [])\n\n\n// returnStatement \u8bed\u53e5\nt.returnStatement(argument);\n- argument: Expression (default: null)",lang:"js"}),l.a.createElement("p",null,"\u5177\u4f53 API \u8bf7\u79fb\u6b65",l.a.createElement(o["Link"],{to:"https://babeljs.io/docs/en/babel-types"},"@babel/types")),l.a.createElement("h3",{id:"\u624b\u5199\u7b80\u6613-plugin"},l.a.createElement(o["AnchorLink"],{to:"#\u624b\u5199\u7b80\u6613-plugin","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u624b\u5199\u7b80\u6613 plugin"),l.a.createElement("p",null,"\u7b2c\u4e00\u7248\uff1a 0620"),l.a.createElement(r["a"],{code:"module.exports = function ({ types: t, template }, options, dirname) {\n  return {\n    visitor: {\n      ArrowFunctionExpression(path, state) {\n        const node = path.node;\n        // \u62ff\u5230\u51fd\u6570\u53c2\u6570\u4f53\n        const params = node.params;\n        // \u62ff\u5230\u51fd\u6570\u4f53\n        const body = node.body;\n        // \u51fd\u6570\u8fd4\u56de\u8bed\u53e5\n        const r = t.returnStatement(body);\n        // \u82b1\u62ec\u53f7 {}\n        const block = t.blockStatement([r]);\n        const f = t.functionExpression(null, params, block, false, false);\n        // \u6784\u9020\u51fd\u6570\u4f53\n        // \u5982\u4f55\u6784\u9020FunctionExpression\n        // \u4ee5\u53ca\u5982\u4f55\u628a\u51fd\u6570\u540d\u548c\u51fd\u6570\u4f53\u63d2\u5165\u8fdb\u53bb\n        // path.repaceWith(t.FunctionDeclaration(path, state));\n        path.replaceWith(f);\n      },\n    },\n  };\n};",lang:"js"}),l.a.createElement("p",null,"\u5f53\u6e90\u4ee3\u7801\u6ca1\u6709\u7f29\u5199\u7684\u65f6\u5019\uff0c\u6bd4\u5982\u662f"),l.a.createElement(r["a"],{code:"const a = () => {\n  console.log(11);\n};",lang:"js"}),l.a.createElement("p",null,"\u8fd9\u65f6\u5019\u4e0a\u9762\u7684\u4ee3\u7801\u5c31\u4f1a\u62a5\u9519 ",l.a.createElement("code",null,'Property argument of ReturnStatement expected node to be of a type ["Expression"] but instead got "BlockStatement"'),",\u6240\u4ee5\u9700\u8981\u9488\u5bf9\u4e0a\u9762\u505a\u4e2a\u7279\u6b8a\u5904\u7406"),l.a.createElement(r["a"],{code:"module.exports = function ({ types: t, template }, options, dirname) {\n  return {\n    visitor: {\n      ArrowFunctionExpression(path, state) {\n        const node = path.node;\n        // \u62ff\u5230\u51fd\u6570\u53c2\u6570\u4f53\n        const params = node.params;\n        // \u62ff\u5230\u51fd\u6570\u4f53\n        let body = node.body;\n        // \u51fd\u6570\u8fd4\u56de\u8bed\u53e5\n        // \u6ca1\u6709{}\u65f6\u624d\u4f1a\u521b\u5efa{}\n        if (!t.isBlockStatement(body)) {\n          const r = t.returnStatement(body);\n          // \u82b1\u62ec\u53f7 {}\n          body = t.blockStatement([r]);\n        }\n        const f = t.functionExpression(null, params, body, false, false);\n        // \u6784\u9020\u51fd\u6570\u4f53\n        // \u5982\u4f55\u6784\u9020FunctionExpression\n        // \u4ee5\u53ca\u5982\u4f55\u628a\u51fd\u6570\u540d\u548c\u51fd\u6570\u4f53\u63d2\u5165\u8fdb\u53bb\n        // path.repaceWith(t.FunctionDeclaration(path, state));\n        path.replaceWith(f);\n      },\n    },\n  };\n};",lang:"js"}),l.a.createElement("p",null,"\u6700\u540e\u5728",l.a.createElement("code",null,"babel.config.js"),"\u4e2d\u914d\u7f6e"),l.a.createElement(r["a"],{code:"module.exports = {\n  presets: [\n    [\n      '@babel/preset-env',\n      {\n        targets: {\n          chrome: 55,\n        },\n        useBuiltIns: 'usage',\n        corejs: '3.6.4',\n      },\n    ],\n  ],\n  plugins: [\n    // \"@babel/plugin-transform-runtime\",\n    './plugin/insertCode/index.js',\n    './plugin/arrowFunction/index.js',\n  ],\n};",lang:"js"}),l.a.createElement("p",null,"\u7136\u540e\u547d\u4ee4\u884c\u6267\u884c ",l.a.createElement("code",null,"npx babel ./index.js --out-file build.ast.plugin.js")),l.a.createElement("p",null,"\u5c31\u4f1a\u6539\u9879\u76ee\u7684",l.a.createElement("code",null,"index.js"),"\u6587\u4ef6\u8f93\u51fa\u5230",l.a.createElement("code",null,"build.ast.plugin.js")),l.a.createElement("h2",{id:"\u53c2\u8003"},l.a.createElement(o["AnchorLink"],{to:"#\u53c2\u8003","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u53c2\u8003"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(o["Link"],{to:"https://blog.csdn.net/weixin_30875157/article/details/99978236"},"AST \u62bd\u8c61\u8bed\u6cd5\u6811")),l.a.createElement("li",null,l.a.createElement(o["Link"],{to:"https://juejin.cn/post/7040328166832865293#heading-2"},"\u4ece\u7bad\u5934\u51fd\u6570\u8f6c\u6362\u770b AST \u62bd\u8c61\u8bed\u6cd5\u6811(\u5c0f\u767d\u7ea7\u6559\u7a0b\uff0c\u7b80\u5355\u6613\u61c2)")),l.a.createElement("li",null,l.a.createElement(o["Link"],{to:"https://blog.csdn.net/qiwoo_weekly/article/details/107011006"},"\u4e00\u6587\u52a9\u4f60\u641e\u61c2 AST")))))}));n["default"]=e=>{var n=l.a.useContext(o["context"]),t=n.demos;return l.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.a.createElement(c,{demos:t})}}}]);