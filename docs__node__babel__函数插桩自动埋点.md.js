(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[97],{Rxs3:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),l=a.n(n),r=a("dEAq"),i=a("H1Ra"),o=l.a.memo((e=>{e.demos;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"markdown"},l.a.createElement("blockquote",null,l.a.createElement("p",null,"\u8fd8\u662f\u5f97\u9700\u8981\u6c89\u4e0b\u5fc3\u6765\uff0c\u6253\u78e8\uff0c\u719f\u6089 babel \u5199\u6cd5\u5957\u8def")),l.a.createElement("h2",{id:"\u9700\u6c42"},l.a.createElement(r["AnchorLink"],{to:"#\u9700\u6c42","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u9700\u6c42"),l.a.createElement("p",null,"\u8f93\u5165\uff1a"),l.a.createElement(i["a"],{code:"import aa from 'aa';\nimport * as bb from 'bb';\nimport { cc } from 'cc';\nimport 'dd';\nimport tarck from 'track';\n\nfunction a() {\n  console.log('aaa');\n}",lang:"js"}),l.a.createElement("p",null,"\u8f93\u51fa"),l.a.createElement(i["a"],{code:"import aa from 'aa';\nimport * as bb from 'bb';\nimport { cc } from 'cc';\nimport 'dd';\nimport tarck from 'track';\n\nfunction a() {\n  tarck();\n  console.log('aaa');\n}",lang:"js"}),l.a.createElement("h2",{id:"\u5206\u6790\u601d\u8def"},l.a.createElement(r["AnchorLink"],{to:"#\u5206\u6790\u601d\u8def","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u5206\u6790\u601d\u8def"),l.a.createElement("p",null,"1.\u5bfc\u5165\u5f15\u7528\u7684\u51fd\u6570\uff0c\u8fd9\u5730\u65b9\u5982\u4f55\u5bfc\u5165,\u5982\u4f55\u65b0\u5efa\u4e00\u4e2a\u5177\u540d\u5bfc\u5165\u6216\u8005\u9ed8\u8ba4\u5bfc\u5165\u7684\u58f0\u660e 2.\u5728\u51fd\u6570\u63d2\u5165\u5bfc\u5165\u7684\u51fd\u6570,\u8fd9\u4e00\u6b65\u9700\u8981\u5148\u521b\u5efa BlockStatement,\u7136\u540e\u5728\u63d2\u5165\u51fd\u6570"),l.a.createElement("p",null,"\u6807\u51c6\u70b9\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u5f15\u5165 tracker \u6a21\u5757\u3002\u5982\u679c\u5df2\u7ecf\u5f15\u5165\u8fc7\u5c31\u4e0d\u5f15\u5165\uff0c\u6ca1\u6709\u7684\u8bdd\u5c31\u5f15\u5165\uff0c\u5e76\u4e14\u751f\u6210\u4e2a\u552f\u4e00 id \u4f5c\u4e3a\u6807\u8bc6\u7b26"),l.a.createElement("li",null,"\u5bf9\u6240\u6709\u51fd\u6570\u5728\u51fd\u6570\u4f53\u5f00\u59cb\u63d2\u5165 tracker \u7684\u4ee3\u7801")),l.a.createElement("h2",{id:"\u53ef\u80fd\u9700\u8981\u7528\u5230\u7684-api"},l.a.createElement(r["AnchorLink"],{to:"#\u53ef\u80fd\u9700\u8981\u7528\u5230\u7684-api","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u53ef\u80fd\u9700\u8981\u7528\u5230\u7684 API"),l.a.createElement("h3",{id:"timportspecifieridentifier-imported"},l.a.createElement(r["AnchorLink"],{to:"#timportspecifieridentifier-imported","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"t.importSpecifier(identifier, imported)"),l.a.createElement("blockquote",null,l.a.createElement("p",null,'unknown: Property local of ImportSpecifier expected node to be of a type ["Identifier"] but instead got undefined')),l.a.createElement("p",null,"See also t.isImportSpecifier(node, opts) and t.assertImportSpecifier(node, opts)."),l.a.createElement("p",null,"AST Node ImportSpecifier shape:"),l.a.createElement("ul",null,l.a.createElement("li",null,"local: Identifier (required) // \u662f\u4ec0\u4e48\u4e1c\u4e1c\uff0c\u5982\u4f55\u521b\u5efa"),l.a.createElement("li",null,"imported: Identifier | StringLiteral (required)"),l.a.createElement("li",null,'importKind: "type" | "typeof" | "value" (default: null, excluded from builder function)')),l.a.createElement("blockquote",null,l.a.createElement("p",null,"Aliases: Standardized, ModuleSpecifier")),l.a.createElement("h3",{id:"timportdefaultspecifierlocal"},l.a.createElement(r["AnchorLink"],{to:"#timportdefaultspecifierlocal","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"t.ImportDefaultSpecifier(local)"),l.a.createElement("p",null,"See also t.isImportDefaultSpecifier(node, opts) and t.assertImportDefaultSpecifier(node, opts)."),l.a.createElement("p",null,"AST Node ImportDefaultSpecifier shape:"),l.a.createElement("p",null,"local: Identifier (required) // \u5982\u4f55\u521b\u5efa Identifier"),l.a.createElement("blockquote",null,l.a.createElement("p",null,"Aliases: Standardized, ModuleSpecifier")),l.a.createElement("h3",{id:"tcallexpressioncallee-arguments"},l.a.createElement(r["AnchorLink"],{to:"#tcallexpressioncallee-arguments","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"t.callExpression(callee, arguments)"),l.a.createElement("p",null,"See also t.isCallExpression(node, opts) and t.assertCallExpression(node, opts)."),l.a.createElement("p",null,"AST Node CallExpression shape:"),l.a.createElement("blockquote",null,l.a.createElement("p",null,"Expression \u4ec0\u4e48\u662f Expression")),l.a.createElement("ul",null,l.a.createElement("li",null,"callee: Expression | V8IntrinsicIdentifier (required)"),l.a.createElement("li",null,"arguments: Array<Expression | SpreadElement | JSXNamespacedName | ArgumentPlaceholder> (required)"),l.a.createElement("li",null,"optional: true | false (default: null, excluded from builder function)"),l.a.createElement("li",null,"typeArguments: TypeParameterInstantiation (default: null, excluded from builder function)"),l.a.createElement("li",null,"typeParameters: TSTypeParameterInstantiation (default: null, excluded from builder function)")),l.a.createElement("blockquote",null,l.a.createElement("p",null,"Aliases: Standardized, Expression")),l.a.createElement("h2",{id:"\u4ee3\u7801\u5b9e\u73b0"},l.a.createElement(r["AnchorLink"],{to:"#\u4ee3\u7801\u5b9e\u73b0","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u4ee3\u7801\u5b9e\u73b0"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u9700\u8981\u904d\u5386\u6574\u4e2a\u6587\u4ef6\u6765\u627e\u5230\u662f\u5426\u6709\u4f9d\u8d56\uff0c\u5982\u679c\u5df2\u7ecf\u5f15\u5165\u5c31\u4e0d\u9700\u8981\u518d\u6b21\u5f15\u5165")),l.a.createElement("p",null,"\u5728 Program \u6839\u7ed3\u70b9\u91cc\u901a\u8fc7 path.traverse \u6765\u904d\u5386 ImportDeclaration\uff0c\u5982\u679c\u5f15\u5165\u4e86 tracker \u6a21\u5757\uff0c\u5c31\u8bb0\u5f55 id \u5230 state\uff0c\u5e76\u7528 path.stop \u6765\u7ec8\u6b62\u540e\u7eed\u904d\u5386\uff1b\u6ca1\u6709\u5c31\u5f15\u5165 tracker \u6a21\u5757\uff0c\u7528 generateUid \u751f\u6210\u552f\u4e00 id\uff0c\u7136\u540e\u653e\u5230 state\u3002"),l.a.createElement("p",null,"\u5f53\u7136 default import \u548c namespace import \u53d6 id \u7684\u65b9\u5f0f\u4e0d\u4e00\u6837\uff0c\u9700\u8981\u5206\u522b\u5904\u7406\u4e0b\u3002"),l.a.createElement("p",null,"\u6211\u4eec\u628a tracker \u6a21\u5757\u540d\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\uff0c\u901a\u8fc7 options.trackerPath \u6765\u53d6\u3002"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("p",null,"\u521b\u5efa\u7684 ast \u8282\u70b9\u8981\u63d2\u5165\u5230\u6ee1\u8db3\u6761\u4ef6\u7684\u51fd\u6570 body \u91cc")),l.a.createElement("li",null,l.a.createElement("p",null,"importModule \u76f8\u5173 api"))),l.a.createElement(i["a"],{code:"const { declare } = require('@babel/helper-plugin-utils');\nconst importModule = require('@babel/helper-module-imports');\n\nconst autoUbtPlugin = declare(({ types: t, template, assertVersion }, options) => {\n  assertVersion(7); // \u5224\u65ad babel \u7248\u672c\u662f\u5426\u662f\u6307\u5b9a\u7684\u7248\u672c\n  return {\n    visitor: {\n      Program: {\n        enter(path, state) {\n          path.traverse({\n            ImportDeclaration(curPath) {\n              const requirePath = curPath.get('source').node.value;\n              if (requirePath === options.trackerPath) {\n                const specifierPath = curPath.get('specifiers.0');\n                if (specifierPath.isImportSpecifier()) {\n                  state.trackerImportId = specifierPath.toString();\n                } else if (specifierPath.isImportNamespaceSpecifier()) {\n                  state.trackerImportId = specifierPath.get('local').toString(); // tracker \u6a21\u5757\u7684 id\n                }\n              }\n            },\n          });\n          if (!state.trackerImportId) {\n            state.trackerImportId = importModule.addDefault(path, 'tracker', {\n              nameHint: path.scope.generateUid('cpp'),\n            }).name;\n            state.trackerAST = template.statement(`${state.trackerImportId}()`)();\n          }\n        },\n      },\n      'FunctionDeclaration|ArrowFunctionExpression|FunctionExpression|ClassMethod': function (\n        path,\n        state,\n      ) {\n        const bodyPath = path.get('body');\n        if (bodyPath.isBlockStatement()) {\n          bodyPath.node.body.unshift(state.trackerAST);\n        } else {\n          const ast = template.statement(`{${state.trackerImportId}();return CPP;}`)({\n            CPP: bodyPath.node,\n          });\n          bodyPath.replaceWith(ast);\n        }\n      },\n    },\n  };\n});\nmodule.exports = autoUbtPlugin;",lang:"js"}),l.a.createElement("h2",{id:"\u53c2\u8003"},l.a.createElement(r["AnchorLink"],{to:"#\u53c2\u8003","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u53c2\u8003"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://blog.csdn.net/qiwoo_weekly/article/details/107011006"},"\u4e00\u6587\u52a9\u4f60\u641e\u61c2 AST")))))}));t["default"]=e=>{var t=l.a.useContext(r["context"]),a=t.demos;return l.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&r["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.a.createElement(o,{demos:a})}}}]);