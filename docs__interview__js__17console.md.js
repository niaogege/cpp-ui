(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[46],{IxhG:function(e,n,o){"use strict";o.r(n);var s=o("q1tI"),a=o.n(s),r=o("dEAq"),l=o("H1Ra"),t=a.a.memo((e=>{e.demos;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("h2",{id:"awaitpromise"},a.a.createElement(r["AnchorLink"],{to:"#awaitpromise","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"await/Promise"),a.a.createElement("p",null,"\u7741\u5927\u773c\u775b\u770b\u770b\u6709\u5565\u533a\u522b"),a.a.createElement("blockquote",null,a.a.createElement("p",null,"\u60f3\u4e0d\u5230 async/await \u6bd4 Promise \u8981\u96be\u7406\u89e3")),a.a.createElement(l["a"],{code:"async function async1() {\n  console.log('async1 start')\n  await new Promise(resolve => {\n    console.log('promise1')\n  })\n  console.log('async1 success')\n  return 'async1 end'\n}\nconsole.log('srcipt start')\nasync1().then(res => console.log(res))\nconsole.log('srcipt end')\n// srcipt start\n// async1 start\n// promise1\n// srcipt end\n// async1 success\n// async1 end\n\n// \u6b63\u786e\u7b54\u6848\nsrcipt start\nasync1 start\npromise1\nsrcipt end",lang:"js"}),a.a.createElement("p",null,"Promise \u91cc\u5982\u679c\u6ca1\u6709 resolve,\u5bfc\u81f4\u7684\u7ed3\u679c\u5c31\u662f\u8be5 Promise \u4e00\u76f4\u5904\u4e8e pending \u72b6\u6001\uff0c\u6240\u4ee5\u4f1a\u5bfc\u81f4\u540e\u9762\u7684\u90fd\u8d70\u4e0d\u5230\u6539\u9020\u4e0a\u9762\u7684\uff0c\u6253\u5370\u5c31\u5b8c\u5168\u53d8\u6837\u4e86\uff0cThis is Why?"),a.a.createElement(l["a"],{code:"async function async1() {\n  console.log('async1 start');\n  await new Promise((resolve) => {\n    console.log('promise1');\n    resolve('CPP');\n  });\n  console.log('async1 success');\n  return 'async1 end';\n}\nconsole.log('srcipt start');\nasync1().then((res) => console.log(res));\nconsole.log('srcipt end');\n// srcipt start\n// async1 start\n// promise1\n// srcipt end\n// async1 success\n// async1 end",lang:"js"}),a.a.createElement("h3",{id:"promise"},a.a.createElement(r["AnchorLink"],{to:"#promise","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"Promise"),a.a.createElement("p",null,"\u5982\u679c resolve \u53c2\u6570\u662f\u4e00\u4e2a promise \uff0c\u5c06\u4f1a\u6539\u53d8 promise \u72b6\u6001\u3002\u6bd4\u5982\u4e0b\u9762\u4f8b\u5b50\u4e2d\uff0ca \u4e2d resolve(b),\u800c b \u53c8\u662f\u4e00\u4e2a promise,\u5bfc\u81f4\u7684\u7ed3\u679c\u5219\u662f a \u7684\u72b6\u6001\u5c06\u88ab\u53d8\u6210 b \u7684\u72b6\u6001"),a.a.createElement(l["a"],{code:"var b = new Promise((resolve) => (window.resolve = resolve)); // pending\nvar a = new Promise((resolve) => resolve(b));\na.then(() => console.log('a'));\nb.then(() => console.log('b'));\nresolve();\nconsole.log(b, a);\n// b\n// a",lang:"js"}),a.a.createElement("p",null,"\u5f53 Promise \u88ab resolve \u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u65f6\uff0c\u9700\u8981\u7b49\u5f85 Promise \u6267\u884c\u5b8c\u624d\u80fd\u7ee7\u7eed\u6267\u884c\uff0c\u5373\u4e0b\u9762\u7684 a \u9700\u8981\u7b49\u5230 ",a.a.createElement("em",null,"b")," resolved \u6267\u884c\u5b8c\u6210"),a.a.createElement("p",null,"\u56e0\u4e3a a \u7684 resolve \u8fd4\u56de\u4e86 b \u7684 Promise,\u6240\u4ee5\u6b64\u65f6 a \u7684 then \u65b9\u6cd5\u5df2\u7ecf\u662f b \u7684 then \u4e86\uff0c\u6240\u4ee5 a \u548c b then \u4e2d\u5747\u8f93\u51fa\u4e86 'b cpp' \u548c 'a cpp'"),a.a.createElement(l["a"],{code:"var b = new Promise((resolve) => (window.resolve = resolve)); // pending\nvar a = new Promise((resolve) => resolve(b));\na.then((res) => console.log('a', res));\nb.then((res) => console.log('b', res));\nresolve('cpp');\nconsole.log(b, a);\n// b cpp\n// a cpp",lang:"js"}),a.a.createElement(l["a"],{code:"var b = new Promise((resolve) => (window.resolve = resolve)); // pending\nvar c = new Promise((resolve) => {});\nvar a = new Promise((resolve) => resolve(c));\na.then(() => console.log('a'));\nb.then(() => console.log('b'));\nresolve();\n// b",lang:"js"}),a.a.createElement(l["a"],{code:"var b = new Promise((resolve) => (window.resolve = resolve)); // pending\nvar a = new Promise((resolve) => resolve(b));\nvar c = a.then(() => console.log('a'));\nvar d = b.then(() => console.log('b'));\nresolve();\nconsole.log(a, b, c, d);\n// b\n// a",lang:"js"}),a.a.createElement(l["a"],{code:"var p1 = new Promise((resolve) => resolve('cpp'));\nvar p2 = new Promise((resolve) => resolve(p1));\nvar p3 = p2.then((res) => console.log('p2then ', res));\nvar p4 = p1.then((res) => console.log('p1then ', res));\nconsole.log(p1, p2, p3, p4);",lang:"js"}),a.a.createElement(l["a"],{code:"var p1 = new Promise((resolve) => (window.resolve = resolve));\nvar p2 = new Promise((resolve) => {\n  setTimeout(() => {\n    resolve('p2');\n  });\n});\nvar p3 = p2.then((res) => console.log('p2then ', res));\nvar p4 = p1.then((res) => console.log('p1then ', res));\nresolve('nima');\nconsole.log(p1, p2, p3, p4);",lang:"js"}),a.a.createElement("h2",{id:"\u6570\u503c\u8f6c\u6362"},a.a.createElement(r["AnchorLink"],{to:"#\u6570\u503c\u8f6c\u6362","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u6570\u503c\u8f6c\u6362"),a.a.createElement(l["a"],{code:"var box = {\n  valueOf() {\n    console.log('\u8c03\u7528\u4e86valueOf');\n    return 'abc';\n  },\n  toString() {\n    console.log('\u8c03\u7528\u4e86toString');\n    return '123';\n  },\n};\nconsole.log(Number(box));",lang:"js"}),a.a.createElement("p",null,"\u4ee5\u53ca"),a.a.createElement(l["a"],{code:"var box = {\n  valueOf() {\n    console.log('\u8c03\u7528\u4e86valueOf');\n    return {};\n  },\n  toString() {\n    console.log('\u8c03\u7528\u4e86toString');\n    return '123';\n  },\n};\nconsole.log(Number(box));",lang:"js"}),a.a.createElement("p",null,"\u8f6c\u6362\u89c4\u5219\u5982\u4e0b\uff1a"),a.a.createElement("p",null,"\u5982\u679c valueOf \u5b58\u5728\uff0c\u4e14\u8fd4\u56de\u201c\u57fa\u672c\u7c7b\u578b\u201d\u6570\u636e\uff0c\u8fd4\u56de valueOf \u7684\u7ed3\u679c\u3002\u5982\u679c toString \u5b58\u5728\uff0c\u4e14\u8fd4\u56de\u201c\u57fa\u672c\u7c7b\u578b\u201d\u6570\u636e\uff0c\u8fd4\u56de toString \u7684\u7ed3\u679c\u3002\u62a5\u9519\u3002")))}));n["default"]=e=>{var n=a.a.useContext(r["context"]),o=n.demos;return a.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&r["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),a.a.createElement(t,{demos:o})}}}]);