(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[36],{"62eW":function(e,n,t){"use strict";t.r(n);var l=t("q1tI"),a=t.n(l),r=t("dEAq"),i=t("H1Ra"),c=a.a.memo((e=>{e.demos;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("p",null,"\u719f\u6089\u6a21\u5f0f\u548c\u5957\u8def\uff0c\u7801\u4ee3\u7801\u66f4\u9ad8\u6548"),a.a.createElement("h2",{id:"\u8bbf\u95ee\u8005\u6a21\u5f0f"},a.a.createElement(r["AnchorLink"],{to:"#\u8bbf\u95ee\u8005\u6a21\u5f0f","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u8bbf\u95ee\u8005\u6a21\u5f0f"),a.a.createElement("p",null,"visitor \u6a21\u5f0f\uff08\u8bbf\u95ee\u8005\u6a21\u5f0f\uff09\u662f 23 \u79cd\u7ecf\u5178\u8bbe\u8ba1\u6a21\u5f0f\u4e2d\u7684\u4e00\u79cd\u3002\u5f53\u88ab\u64cd\u4f5c\u7684\u5bf9\u8c61\u7ed3\u6784\u6bd4\u8f83\u7a33\u5b9a\uff0c\u800c\u64cd\u4f5c\u5bf9\u8c61\u7684\u903b\u8f91\u7ecf\u5e38\u53d8\u5316\u7684\u65f6\u5019\uff0c",a.a.createElement("strong",null,"\u901a\u8fc7\u5206\u79bb\u903b\u8f91\u548c\u5bf9\u8c61\u7ed3\u6784"),"\uff0c\u4f7f\u5f97\u4ed6\u4eec\u80fd\u72ec\u7acb\u6269\u5c55\u3002\u8fd9\u5c31\u662f visitor \u6a21\u5f0f\u7684\u601d\u60f3\u3002"),a.a.createElement("p",null,"\u7279\u70b9\uff1a"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u64cd\u4f5c\u5bf9\u8c61\u7684",a.a.createElement("strong",null,"\u7ed3\u6784\u7a33\u5b9a")),a.a.createElement("li",null,"\u64cd\u4f5c\u5bf9\u8c61\u7684",a.a.createElement("strong",null,"\u903b\u8f91\u9891\u7e41\u53d8\u5316"))),a.a.createElement("p",null,"\u610f\u56fe\uff1a\u8868\u793a\u4e00\u4e2a\u4f5c\u7528\u4e8e\u67d0\u5bf9\u8c61\u7ed3\u6784\u4e2d\u7684\u5404\u5143\u7d20\u7684\u64cd\u4f5c\u3002\u5b83\u4f7f\u4f60\u53ef\u4ee5\u5728",a.a.createElement("strong",null,"\u4e0d\u6539\u53d8\u5404\u5143\u7d20\u7684\u7c7b"),"\u7684\u524d\u63d0\u4e0b\u5b9a\u4e49\u4f5c\u7528\u4e8e\u8fd9\u4e9b\u5143\u7d20\u7684\u65b0\u64cd\u4f5c\u3002"),a.a.createElement("p",null,"\u5047\u8bbe\u4f60\u7528\u4e86\u8bbf\u95ee\u8005\u6a21\u5f0f\uff0c\u4f1a\u53d1\u73b0\uff0c\u6bcf\u5929\u56e0\u4e3a\u8fed\u4ee3\u800c\u65b0\u589e\u7684\u90a3\u51e0\u4e2a\u65b9\u6cd5\uff0c\u90fd\u4f1a\u653e\u5230\u4e00\u4e2a\u65b0 Visitor \u6587\u4ef6\u4e0b\uff0c\u6bd4\u5982\u4e00\u79cd\u7eb3\u7c73\u6750\u6599\u7684\u95e8\u677f\u5728\u6e38\u620f V1.5 \u7248\u672c\u88ab\u5f15\u8fdb\uff0c\u5b83\u5bf9\u6750\u6599\u7684\u4f7f\u7528\u4f1a\u4f53\u73b0\u5728\u65b0\u589e\u4e00\u4e2a Visitor \u6587\u4ef6\uff0c\u8d44\u6e90\u672c\u8eab\u7684\u7c7b\u4e0d\u4f1a\u88ab\u4fee\u6539\uff0c\u8fd9\u65e2\u4e0d\u4f1a\u5f15\u53d1\u534f\u540c\u95ee\u9898\uff0c\u4e5f\u4f7f\u529f\u80fd\u4ee3\u7801\u6309\u7167\u573a\u666f\u805a\u5408\uff0c\u4e0d\u8bba\u7ef4\u62a4\u8fd8\u662f\u5220\u9664\u7684\u5fc3\u667a\u8d1f\u62c5\u90fd\u975e\u5e38\u5c0f\u3002"),a.a.createElement("p",null,"\u8bbf\u95ee\u8005\u6a21\u5f0f\u80cc\u540e\u7684\u601d\u8003\u672c\u8d28\u8fd8\u662f\uff0c",a.a.createElement("strong",null,"\u57fa\u7840\u7684\u5143\u7d20\u6570\u91cf\u4e00\u822c\u4e0d\u4f1a\u968f\u7740\u7a0b\u5e8f\u8fed\u4ee3\u4ea7\u751f\u592a\u5927\u53d8\u5316\uff0c\u800c\u5bf9\u8fd9\u4e9b\u57fa\u7840\u5143\u7d20\u7684\u4f7f\u7528\u65b9\u5f0f\u6216\u7ec4\u5408\u4f7f\u7528\u4f1a\u968f\u7740\u7a0b\u5e8f\u8fed\u4ee3\u4e0d\u65ad\u66f4\u65b0\uff0c\u6211\u4eec\u5c06\u53d8\u5316\u66f4\u5feb\u7684\u901a\u8fc7 Visitor \u6253\u5305\u63d0\u53d6\u51fa\u6765\uff0c\u81ea\u7136\u4f1a\u66f4\u5229\u4e8e\u7ef4\u62a4"),"\u3002"),a.a.createElement("p",null,"\u4ec0\u4e48\u60c5\u51b5\u4e0b\u8003\u8651\u4f7f\u7528\u8bbf\u95ee\u8005\u6a21\u5f0f\uff1f"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("p",null,"\u4e00\u4e2a\u5bf9\u8c61\u7ed3\u6784\u5305\u542b\u5f88\u591a\u7c7b\u5bf9\u8c61\uff0c\u4ed6\u4eec\u6709\u4e0d\u540c\u63a5\u53e3\uff0c\u800c\u4f60\u60f3\u5bf9\u8fd9\u4e9b\u5bf9\u8c61\u5b9e\u65bd\u4e00\u4e9b\u4f9d\u8d56\u4e8e\u5176\u5177\u4f53\u7c7b\u7684\u64cd\u4f5c")),a.a.createElement("li",null,a.a.createElement("p",null,"\u9700\u8981\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u7ed3\u6784\u4e2d\u7684\u5bf9\u8c61\u8fdb\u884c\u5f88\u591a\u4e0d\u540c\u7684\u5e76\u4e14\u4e0d\u76f8\u5173\u7684\u64cd\u4f5c\uff0c\u800c\u4f60\u60f3\u907f\u514d\u8ba9\u8fd9\u4e9b\u64cd\u4f5c\u201c\u6c61\u67d3\u201d\u8fd9\u4e9b\u5bf9\u8c61\u7684\u7c7b\u3002Visitor \u4f7f\u5f97\u4f60\u53ef\u4ee5\u5c06\u76f8\u5173\u7684\u64cd\u4f5c\u96c6\u4e2d\u8d77\u6765\u5b9a\u4e49\u5728\u4e00\u4e2a\u7c7b\u4e2d\u3002")),a.a.createElement("li",null,a.a.createElement("p",null,"\u5b9a\u4e49\u5bf9\u8c61\u7ed3\u6784\u7684\u7c7b\u5f88\u5c11\u6539\u53d8\uff0c\u4f46\u7ecf\u5e38\u9700\u8981\u5728\u6b64\u7ed3\u6784\u4e0a",a.a.createElement("strong",null,"\u5b9a\u4e49\u65b0\u7684\u64cd\u4f5c"),"(\u4f46\u662f\u64cd\u4f5c\u5bf9\u8c61\u7684\u903b\u8f91\u7ecf\u5e38\u53d1\u751f\u53d8\u5316)"))),a.a.createElement("p",null,"\u8bbf\u95ee\u8005\u6a21\u5f0f\u7684\u7279\u70b9\uff1a"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("p",null,"\u5728\u7c7b\u7684\u5185\u90e8\u7ed3\u6784\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u4e0d\u540c\u7684\u8bbf\u95ee\u8005\u8bbf\u95ee\u8fd9\u4e2a\u5bf9\u8c61\u90fd\u4f1a\u5448\u73b0\u51fa\u4e0d\u540c\u7684\u5904\u7406\u65b9\u5f0f")),a.a.createElement("li",null,a.a.createElement("p",null,"\u52a0\u5165\u65b0\u7684\u64cd\u4f5c\uff0c\u76f8\u5bf9\u5bb9\u6613\uff0c\u800c\u65e0\u9700\u6539\u53d8\u7ed3\u6784\u672c\u8eab")),a.a.createElement("li",null,a.a.createElement("p",null,"\u8bbf\u95ee\u8005\u6240\u8fdb\u884c\u7684\u64cd\u4f5c\uff0c\u5176\u4ee3\u7801\u662f\u96c6\u4e2d\u5728\u4e00\u8d77\u7684")),a.a.createElement("li",null,a.a.createElement("p",null,"\u5f53\u91c7\u7528\u8bbf\u95ee\u8005\u6a21\u5f0f\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u6253\u7834\u7ec4\u5408\u7c7b\u7684\u5c01\u88c5"))),a.a.createElement("h3",{id:"babel-\u7684-visitor"},a.a.createElement(r["AnchorLink"],{to:"#babel-\u7684-visitor","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"babel \u7684 Visitor"),a.a.createElement("p",null,"\u5bf9\u5e94\u5230 ",a.a.createElement("strong",null,"babel traverse")," \u7684\u5b9e\u73b0\uff0c\u5c31\u662f AST \u548c visitor \u5206\u79bb\uff0c\u5728 traverse\uff08\u904d\u5386\uff09AST \u7684\u65f6\u5019\uff0c\u8c03\u7528\u6ce8\u518c\u7684 ",a.a.createElement("strong",null,"visitor")," \u6765\u5bf9\u5176\u8fdb\u884c\u5904\u7406\u3002"),a.a.createElement("p",null,"\u8bbf\u95ee\u8005\u6a21\u5f0f\u5176\u5b9e\u662f\u5728\u628a",a.a.createElement("strong",null,"\u5bf9\u8c61\u7ed3\u6784"),"\u548c",a.a.createElement("strong",null,"\u64cd\u4f5c\u903b\u8f91"),"\u5206\u5f00\uff0c\u4f7f\u5f97\u4e24\u8005\u53ef\u4ee5\u72ec\u7acb\u62d3\u5c55\u3002\u5bf9\u5e94\u5230 babel traverse \u9636\u6bb5\u7684\u5b9e\u73b0\uff0c\u5c31\u662f\u5c06\u904d\u5386 AST \u548c\u64cd\u4f5c\u8282\u70b9\u4e24\u90e8\u5206\u903b\u8f91\u5206\u79bb\uff0c",a.a.createElement("strong",null,"\u5728 traverse AST \u7684\u65f6\u5019\uff0c\u8c03\u7528\u6ce8\u518c\u7684 visitor \u6765\u5bf9\u5176\u8fdb\u884c\u5904\u7406"),"\u3002\u8fd9\u6837\u4f7f\u5f97 AST \u7684\u7ed3\u6784\u548c\u904d\u5386\u7b97\u6cd5\u56fa\u5b9a\uff0c",a.a.createElement("strong",null,"visitor \u53ef\u4ee5\u901a\u8fc7\u63d2\u4ef6\u72ec\u7acb\u6269\u5c55"),"\u3002"),a.a.createElement("p",null,"babel \u5728\u904d\u5386 AST \u6811\u7684\u65f6\u5019\uff0c\u5904\u7406\u4e00\u4e2a\u8282\u70b9\u65f6\uff0c\u662f\u4ee5\u8bbf\u95ee\u8005\u7684\u5f62\u5f0f\u83b7\u53d6\u8282\u70b9\u4fe1\u606f\uff0c\u5e76\u8fdb\u884c\u76f8\u5173\u64cd\u4f5c\uff0c\u8fd9\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7\u4e00\u4e2a visitor \u5bf9\u8c61\u6765\u5b8c\u6210\u7684\uff0c\u5728 visitor \u5bf9\u8c61\u4e2d\u5b9a\u4e49\u4e86\u5bf9\u4e8e\u5404\u79cd\u8282\u70b9\u7684\u8bbf\u95ee\u51fd\u6570\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u9488\u5bf9\u4e0d\u540c\u7684\u8282\u70b9\u505a\u51fa\u4e0d\u540c\u7684\u5904\u7406\u3002\u6211\u4eec\u7f16\u5199\u7684 Babel \u63d2\u4ef6\u5176\u5b9e\u4e5f\u662f\u901a\u8fc7\u5b9a\u4e49\u4e00\u4e2a\u5b9e\u4f8b\u5316 visitor \u5bf9\u8c61\u5904\u7406\u4e00\u7cfb\u5217\u7684 AST \u8282\u70b9\u6765\u5b8c\u6210\u6211\u4eec\u5bf9\u4ee3\u7801\u7684\u4fee\u6539\u64cd\u4f5c\u3002"),a.a.createElement("h3",{id:"\u4ee3\u7801\u5b9e\u73b0"},a.a.createElement(r["AnchorLink"],{to:"#\u4ee3\u7801\u5b9e\u73b0","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u4ee3\u7801\u5b9e\u73b0"),a.a.createElement(i["a"],{code:"interface CElement {\n  accept: (arg: any) => void;\n}\ninterface Visitor {\n  visit: (arg: any) => void;\n}\nclass ConcreteElement implements CElement {\n  public accept(visitor: Visitor) {\n    visitor.visit(this);\n  }\n}\nclass ConcreteVisitorX implements Visitor {\n  public visit(element: CElement) {\n    element.accept(this);\n  }\n\n  public visit(concreteElementA: ConcreteElementA) {\n    console.log('X \u64cd\u4f5c A');\n  }\n\n  public visit(concreteElementB: ConcreteElementB) {\n    console.log('X \u64cd\u4f5c B');\n  }\n}\nclass ConcreteVisitorY implements Visitor {\n  public visit(element: ELement) {\n    element.accept(this);\n  }\n\n  public visit(concreteElementA: ConcreteElementA) {\n    console.log('Y \u64cd\u4f5c A');\n  }\n\n  public visit(concreteElementB: ConcreteElementB) {\n    console.log('Y \u64cd\u4f5c B');\n  }\n}\n\n// \u5148\u521b\u5efa\u5143\u7d20\nconst element = new ConcreteElement();\n\n// \u8bbf\u95ee\u8005 X\nconst visitorX = new ConcreteVisitorX();\n\n// \u8bbf\u95ee\u8005 Y\nconst visitorY = new ConcreteVisitorY();\n\n// \u7136\u540e\u8ba9\u8bbf\u95ee\u8005 visit \u89c2\u5bdf\u4e00\u4e0b\u5143\u7d20\nvisitorX.visit(element as CElement);\nvisitorY.visit(element as CElement);",lang:"ts"}),a.a.createElement("h2",{id:"\u53c2\u8003"},a.a.createElement(r["AnchorLink"],{to:"#\u53c2\u8003","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u53c2\u8003"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(r["Link"],{to:"https://github.com/ascoders/weekly/blob/v2/189.%E7%B2%BE%E8%AF%BB%E3%80%8A%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%20-%20Visitor%20%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F%E3%80%8B.md"},"Visitor\uff08\u8bbf\u95ee\u8005\u6a21\u5f0f\uff09")))))}));n["default"]=e=>{var n=a.a.useContext(r["context"]),t=n.demos;return a.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&r["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),a.a.createElement(c,{demos:t})}}}]);