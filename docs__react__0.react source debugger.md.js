(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[124],{E3JF:function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),r=t.n(a),l=t("dEAq"),o=t("H1Ra"),s=r.a.memo((e=>{e.demos;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"markdown"},r.a.createElement("p",null,"\u819c\u62dc",r.a.createElement(l["Link"],{to:"https://mp.weixin.qq.com/s/Yfmb11mmvfXg2FlEu7UlXA"},"react \u6e90\u7801\u8c03\u8bd5")),r.a.createElement("blockquote",null,r.a.createElement("p",null,"\u8c03\u8bd5 launch.json \u7684\u65f6\u5019\uff0c\u672c\u5730\u8bb0\u5f97\u8fd0\u884c\u9879\u76ee\u5728 debugger,\u4e0d\u7136\u62a5\u9519 debugger \u4e0d\u8d77\u6765")),r.a.createElement("p",null,"\u7ecf\u8fc7\u5468\u672b\u7684\u6298\u817e\uff0c\u7ec8\u4e8e\u80fd\u628a\u6e90\u7801\u8c03\u8bd5\u641e\u5b9a\u4e86\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u9605\u8bfb\u6e90\u7801\u7684\u6d69\u5927\u5de5\u7a0b\uff0c\u54c8\u54c8\u54c8\uff0c\u4e0d\u77e5\u9053\u5982\u4f55\u4e0b\u624b"),r.a.createElement("p",null,"\u5148\u8bb0\u5f55\u4e0b\u6e90\u7801\u8c03\u8bd5\u7684\u8fc7\u7a0b\uff0c"),r.a.createElement("h3",{id:"first-step"},r.a.createElement(l["AnchorLink"],{to:"#first-step","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"First step"),r.a.createElement("p",null,"\u5efa\u4e00\u4e2a workspace,\u5047\u8bbe\u540d\u79f0\u662f reactTs,\u91cc\u9762\u5305\u542b\u4e24\u4e2a\u5b50\u9879\u76ee\uff0c\u4e00\u4e2a\u662f react-test,\u7528 create-react-app \u642d\u5efa\u5373\u53ef\uff0c\u53e6\u4e00\u4e2a\u662f react-source,\u8fd9\u4e2a\u76f4\u63a5\u53bb github \u4e0a\u4e0b\u8f7d\u6307\u5b9a\u7248\u672c\u7684",r.a.createElement(l["Link"],{to:"https://github.com/facebook/react"},"react \u6e90\u7801"),"\u5373\u53ef,\u6211\u9879\u76ee\u91cc\u7528\u7684\u662f 17.0.2\uff0c\u6240\u4ee5\u6e90\u7801\u4e0b\u8f7d\u4e4b\u540e\uff0c\u628a\u5206\u652f\u5207\u5230 ",r.a.createElement("strong",null,"17.0.2"),",\u8bb0\u5f97 yarn,\u628a\u6e90\u7801\u6240\u9700\u8981\u7684\u4f9d\u8d56\u5b89\u88c5\u5b8c\u6bd5"),r.a.createElement("ul",null,r.a.createElement("li",null,"reactTs(\u5305\u542b\u4e24\u4e2a\u5b50\u9879\u76ee)"),r.a.createElement("li",null,r.a.createElement("strong",null,"react-test")),r.a.createElement("li",null,r.a.createElement("strong",null,"react-source"))),r.a.createElement("h3",{id:"second-step"},r.a.createElement(l["AnchorLink"],{to:"#second-step","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"Second step"),r.a.createElement("p",null,"\u5728\u6839\u76ee\u5f55",r.a.createElement("strong",null,"reactTs"),"\u4e0b\u65b0\u5efa\u4e00\u4e2a ",r.a.createElement("strong",null,".vscode")," \u6587\u4ef6\u5939\uff0c\u7136\u540e\u65b0\u5efa\u8c03\u8bd5\u6587\u4ef6",r.a.createElement("strong",null,"launch.json")),r.a.createElement(o["a"],{code:'{\n  "configurations": [\n    {\n      "name": "debugger react",\n      "request": "launch",\n      "type": "chrome",\n      "url": "http://localhost:3000",\n      "webRoot": "${workspaceFolder}/react-test"\n    }\n  ]\n}',lang:"json"}),r.a.createElement("h3",{id:"third-step"},r.a.createElement(l["AnchorLink"],{to:"#third-step","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"Third step"),r.a.createElement("p",null,"\u9700\u8981\u5bf9 react \u6e90\u7801\u8fdb\u884c\u6253\u5305\uff0c\u6253\u5305\u51fa\u542b\u6709",r.a.createElement("strong",null,"sourceMap"),"\u7684\u6587\u4ef6\uff0c\u6240\u4ee5\u4fee\u6539",r.a.createElement("em",null,"react-source/scripts/rollup/build.js"),"\uff0c\u4fee\u6539\u4e3b\u8981\u662f 2 \u4e2a\u65b9\u6cd5\uff0c\u5185\u5bb9\u4e3b\u8981\u5982\u4e0b"),r.a.createElement(o["a"],{code:"//...\u7701\u7565\u4ee3\u7801\n//1\u3002\u66f4\u6539\u914d\u7f6e\uff0c\u8bbe\u7f6e\u6e90\u7801\u7edd\u5bf9\u5b9a\u4f4d\nfunction getRollupOutputOptions(outputPath, format, globals, globalName, bundleType) {\n  const isProduction = isProductionBundleType(bundleType);\n\n  return {\n    file: outputPath,\n    format,\n    globals,\n    freeze: !isProduction,\n    interop: false,\n    name: globalName,\n    sourcemap: true, // \u914d\u7f6e\u4e3atrue\n    sourcemapPathTransform(relativeSourcePath) {\n      return relativeSourcePath.replace(\n        '../../../../packages',\n        '/Users/cpp/My/project/reactTs/react-source/packages', // \u6b64\u5904\u4e3areact\u6e90\u7801\u7684\u7edd\u5bf9\u4f4d\u7f6e\uff0c\u66f4\u6362\u6210\u81ea\u5df1\u7684\u5373\u53ef\n      );\n    },\n    esModule: false,\n  };\n}\n// 2.\u6ce8\u91ca\u5404\u79cd\u63d2\u4ef6\u4ee3\u7801\nfunction getPlugins(\n  entry,\n  externals,\n  updateBabelOptions,\n  filename,\n  packageName,\n  bundleType,\n  globalName,\n  moduleType,\n  pureExternalModules,\n  bundle,\n) {\n  const findAndRecordErrorCodes = extractErrorCodes(errorCodeOpts);\n  const forks = Modules.getForks(bundleType, entry, moduleType, bundle);\n  const isProduction = isProductionBundleType(bundleType);\n  const isProfiling = isProfilingBundleType(bundleType);\n  const isUMDBundle =\n    bundleType === UMD_DEV || bundleType === UMD_PROD || bundleType === UMD_PROFILING;\n  const isFBWWWBundle =\n    bundleType === FB_WWW_DEV || bundleType === FB_WWW_PROD || bundleType === FB_WWW_PROFILING;\n  const isRNBundle =\n    bundleType === RN_OSS_DEV ||\n    bundleType === RN_OSS_PROD ||\n    bundleType === RN_OSS_PROFILING ||\n    bundleType === RN_FB_DEV ||\n    bundleType === RN_FB_PROD ||\n    bundleType === RN_FB_PROFILING;\n  const shouldStayReadable = isFBWWWBundle || isRNBundle || forcePrettyOutput;\n  return [\n    // Extract error codes from invariant() messages into a file.\n    shouldExtractErrors && {\n      transform(source) {\n        findAndRecordErrorCodes(source);\n        return source;\n      },\n    },\n    // Shim any modules that need forking in this environment.\n    useForks(forks),\n    // Ensure we don't try to bundle any fbjs modules.\n    forbidFBJSImports(),\n    // Use Node resolution mechanism.\n    resolve({\n      skip: externals,\n    }),\n    // Remove license headers from individual modules\n    stripBanner({\n      exclude: 'node_modules/**/*',\n    }),\n    // Compile to ES2015.\n    babel(getBabelConfig(updateBabelOptions, bundleType, packageName, externals, !isProduction)),\n    // Remove 'use strict' from individual source files.\n    // {\n    //   transform(source) {\n    //     return source.replace(/['\"]use strict[\"']/g, '');\n    //   },\n    // },\n    // Turn __DEV__ and process.env checks into constants.\n    replace({\n      __DEV__: isProduction ? 'false' : 'true',\n      __PROFILE__: isProfiling || !isProduction ? 'true' : 'false',\n      __UMD__: isUMDBundle ? 'true' : 'false',\n      'process.env.NODE_ENV': isProduction ? \"'production'\" : \"'development'\",\n      __EXPERIMENTAL__,\n      // Enable forked reconciler.\n      // NOTE: I did not put much thought into how to configure this.\n      __VARIANT__: bundle.enableNewReconciler === true,\n    }),\n    // The CommonJS plugin *only* exists to pull \"art\" into \"react-art\".\n    // I'm going to port \"art\" to ES modules to avoid this problem.\n    // Please don't enable this for anything else!\n    isUMDBundle && entry === 'react-art' && commonjs(),\n    // Apply dead code elimination and/or minification.\n    // isProduction &&\n    //   closure(\n    //     Object.assign({}, closureOptions, {\n    //       // Don't let it create global variables in the browser.\n    //       // https://github.com/facebook/react/issues/10909\n    //       assume_function_wrapper: !isUMDBundle,\n    //       renaming: !shouldStayReadable,\n    //     })\n    //   ),\n    // HACK to work around the fact that Rollup isn't removing unused, pure-module imports.\n    // Note that this plugin must be called after closure applies DCE.\n    // isProduction && stripUnusedImports(pureExternalModules),\n    // Add the whitespace back if necessary.\n    // shouldStayReadable &&\n    //   prettier({\n    //     parser: 'babel',\n    //     singleQuote: false,\n    //     trailingComma: 'none',\n    //     bracketSpacing: true,\n    //   }),\n    // License and haste headers, top-level `if` blocks.\n    // {\n    //   renderChunk(source) {\n    //     return Wrappers.wrapBundle(\n    //       source,\n    //       bundleType,\n    //       globalName,\n    //       filename,\n    //       moduleType\n    //     );\n    //   },\n    // },\n    // Record bundle size.\n    sizes({\n      getSize: (size, gzip) => {\n        const currentSizes = Stats.currentBuildResults.bundleSizes;\n        const recordIndex = currentSizes.findIndex(\n          (record) => record.filename === filename && record.bundleType === bundleType,\n        );\n        const index = recordIndex !== -1 ? recordIndex : currentSizes.length;\n        currentSizes[index] = {\n          filename,\n          bundleType,\n          packageName,\n          size,\n          gzip,\n        };\n      },\n    }),\n  ].filter(Boolean);\n}",lang:"js"}),r.a.createElement("h3",{id:"fourth-step"},r.a.createElement(l["AnchorLink"],{to:"#fourth-step","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"Fourth step"),r.a.createElement("p",null,"\u8c03\u8bd5\u5de5\u5177\u53ea\u4f1a\u89e3\u6790\u4e00\u6b21 sourceMap\uff0c\u4e5f\u5c31\u662f\u8981\u4e48\u53ea\u80fd\u5b8c\u6210\u4ece ",r.a.createElement("strong",null,"bundle.js")," \u5230 ",r.a.createElement("strong",null,"react-xxx.development.js")," \u7684\u6620\u5c04\uff0c\u8981\u4e48\u5b8c\u6210 ",r.a.createElement("strong",null,"react-xx.development.js")," \u5230 ",r.a.createElement("strong",null,"react")," \u6700\u521d\u6e90\u7801\u7684\u6620\u5c04\uff0c\u6240\u4ee5\u60f3\u770b\u6e90\u7801\uff0c\u5c31\u53ea\u80fd\u628a\u524d\u9762\u7684\u6620\u5c04\u5e72\u6389\uff0c\u5982\u4f55\u5e72\u6389\u5462\uff1f"),r.a.createElement("p",null,r.a.createElement("strong",null,"\u4e0d\u6253\u5305")," react \u548c react-dom \u8fd9\u4fe9\u5305\u4e0d\u5c31\u884c\u4e86\u3002\u4e0d\u7ecf\u8fc7 webpack \u6253\u5305\uff0c\u90a3\u5c31\u6ca1\u6709 webpack \u4ea7\u751f\u7684 sourcemap\uff0c\u4e0d\u5c31\u4e00\u6b21\u5c31\u6620\u5c04\u5230 React \u6700\u521d\u7684\u6e90\u7801\u4e86\u3002"),r.a.createElement("p",null,"\u90a3\u600e\u4e48\u4e0d\u6253\u5305\u8fd9\u4fe9\u6a21\u5757\u5462\uff1f webpack \u652f\u6301 externals \u6765\u914d\u7f6e\u4e00\u4e9b\u6a21\u5757\u4f7f\u7528\u5168\u5c40\u53d8\u91cf\u800c\u4e0d\u8fdb\u884c\u6253\u5305\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u5355\u72ec\u52a0\u8f7d react\u3001react-dom\uff0c\u7136\u540e\u628a\u4ed6\u4eec\u5bfc\u51fa\u7684\u5168\u5c40\u53d8\u91cf\u914d\u7f6e\u5230 externals \u5c31\u884c\u4e86\u3002\u8981\u6539\u52a8 webpack \u914d\u7f6e\u7684\u8bdd\uff0c\u5728 create-react-app \u4e0b\u8981\u6267\u884c ",r.a.createElement("strong",null,"npm run eject"),"\u3002\u7136\u540e\u9879\u76ee\u4e0b\u4f1a\u591a\u51fa config \u76ee\u5f55\u548c public \u76ee\u5f55\uff0c\u8fd9\u4fe9\u5206\u522b\u653e\u7740 webpack \u914d\u7f6e\u548c\u4e00\u4e9b\u516c\u5171\u6587\u4ef6\u3002\u66f4\u6539 webpack \u7f16\u8bd1\u914d\u7f6e"),r.a.createElement(o["a"],{code:'// \u6587\u4ef6\u4f4d\u7f6e react-test/config/webpack.config.js\n... \u7701\u7565\u4ee3\u7801\n    // Turn off performance processing because we utilize\n    // our own hints via the FileSizeReporter\n    performance: false,\n    externals: {\n      react: "React",\n      "react-dom": "ReactDOM",\n    },\n... \u7701\u7565\u4ee3\u7801',lang:"js"}),r.a.createElement("p",null,"\u7136\u540e\u628a react.development.js \u548c react-dom.development.js \u4ee5\u53ca\u5bf9\u5e94\u7684 map \u6587\u4ef6\u4e00\u8d77 \u62f7\u8d1d\u5230 ",r.a.createElement("strong",null,"public")," \u4e0b\uff0c\u5e76\u5728 index.html \u91cc\u9762\u7684 head \u6807\u7b7e\u91cc \u52a0\u8f7d\u8fd9\u4fe9\u6587\u4ef6\uff1a"),r.a.createElement(o["a"],{code:'<script src="./react.development.js"><\/script>\n<script src="./react-dom.development.js"><\/script>',lang:"html"}),r.a.createElement("h3",{id:"last-step"},r.a.createElement(l["AnchorLink"],{to:"#last-step","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"Last step"),r.a.createElement("p",null,"\u9996\u5148\u628a react-test \u9879\u76ee\u7ed9\u8fd0\u884c\u8d77\u6765,\u6267\u884c yarn start,\u7136\u540e ",r.a.createElement("strong",null,"debugger"),"\uff0c\u5c31\u80fd\u770b\u5230 react \u6e90\u7801\u4e86\uff0c\u800c\u4e14\u70b9\u51fb\u6587\u4ef6\u8def\u5f84\uff0c\u4e5f\u80fd\u4e00\u6b65\u8df3\u8fc7\u53bb\uff0creact-test \u5df2\u4e0a\u4f20\u5230 github \u4e2d\u4e2a\u4eba\u4ed3\u5e93",r.a.createElement(l["Link"],{to:"https://github.com/niaogege/cpp-react-test"},"cpp-react-test"))))}));n["default"]=e=>{var n=r.a.useContext(l["context"]),t=n.demos;return r.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&l["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),r.a.createElement(s,{demos:t})}}}]);