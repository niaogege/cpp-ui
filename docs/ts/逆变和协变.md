---
title: 逆变和协变
order: 2
group:
  order: 0
  title: TS
  path: /interview/ts
nav:
  order: 3
  title: 'interview'
  path: /interview
---

## 协变

```ts
type User1 = {
  id: number;
  name: string;
};

type InferUser22<T> = T extends { id: infer U; name: infer U } ? U : T;
type GetUser22 = InferUser2<User1>; // string | number
```

这是因为在协变位置上，若同一个类型变量存在多个候选者，则最终的类型将被推断为联合类型。

## 逆变

逆变位置上，若同一个类型变量存在多个候选者，则最终的类型将被推断为交叉类型。同样，我们来实际验证一下

```ts
type Bar = {
  a: (x: string) => void;
  b: (x: number) => void;
};
type InferBar<T> = T extends {
  a: (x: infer U) => void;
  b: (x: infer U) => void;
}
  ? U
  : never;
type GetBar = InferBar<Bar>; // never
```

## 膜拜大佬

- [深入 TypeScript 中的子类型、逆变、协变，进阶 Vue3 源码前必须搞懂的。](https://juejin.cn/post/6855517117778198542)
