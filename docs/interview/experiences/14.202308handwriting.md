---
title: 202308手写汇总(2)
order: 14
group:
  order: 0
  title: interview
nav:
  order: 3
  title: 'interview'
  path: /interview
---

> 0808 再接再厉 在背出 50 道题

> 0821 再接再厉 不忘初心 还有最后 20 道题

```js
/**
 * 1.[链表相交](https://leetcode.cn/problems/intersection-of-two-linked-lists-lcci/description/)
 * 2.[盛最多水的容器](https://leetcode.cn/problems/container-with-most-water/)
 * 3.[有效的括号](https://leetcode.cn/problems/valid-parentheses/)
 * 4.实现ES6的Class
 * 5.[实现ES6的Extend](https://mp.weixin.qq.com/s/8FmjffUnWx49LsyJn28XdA)
 * 6.使用reduce实现数组flat方法
 * 7.[寄生组合式继承](https://mp.weixin.qq.com/s/8-vWM7WMqZYMnw_pe7CXhg)
 * 8.观察者模式
 * 9.once 函数 跟 memo函数差不多
 * 10.TS练习体操之Equal<A, B>
 * 11.滚动到底部懒加载数据Hooks实现
 * 12.TS练习之Pick<T, K>
 * 13.图片懒加载实现
 * 14.单例模式手写
 * 15.找出数组中出现次数最多的数字，如[1,2,1,2,3],打印出1和2，出现的次数是2；[1,2,5,5,5],打印5，出现的次数是3
 * 16.手写ts版Awaited<T>
 * 17.setInterval 实现 setTimeout / setTimeout 实现 setInterval
 * 18.[手写虚拟DOM](https://mp.weixin.qq.com/s/S-7w8KgG0R5mdFIcCT0Keg)
 * 19.如何实现(a == 1 && a == 2 && a == 3)？
 * 20.实现数组中的findIndex/find/include
 * 21.[实现对象中的entries/fromEntries/assign](https://mp.weixin.qq.com/s/S-7w8KgG0R5mdFIcCT0Keg)
 * 22.二叉树的最小深度/最大深度(https://programmercarl.com/)
 * 23.TS手写IndexToUnion索引转联合类型/
 * 24.TS手写Unique 去重
 * 25.[手写axios以及核心组件拦截器](https://mp.weixin.qq.com/s/nmKU-Z1Ewc75HH0NxgvcCw)
 * 26.手写Object.create()的实现
 * 27.[写一个通用的事件侦听器函数](https://mp.weixin.qq.com/s/uKPVedfQkgEPYoRUtwyeQQ)
 * 28.怎么实现一个sleep
 * 29.对象数组去重
 * 30.查找字符串中出现最多的字符和个数
 * 31.实现一个 immutable
 * 32.惰性函数
 * 33.使用睡眠函数实现红绿灯代码，红灯2秒，黄灯1秒，绿灯3秒，循环改变颜色。
 * 34.[1s后输出1 2s后输出2 3s后输出3](https://juejin.cn/post/6920492226594373639?searchId=20230828231941247DD0C17D7CAD3D5286)
 * 35.TS手写联合转交叉
 * 36.TS实现内置函数Parameters和ReturnTypes
 */
```

### 8.观察者模式

### 9.once 函数 跟 memo 函数差不多

```js
function memo(fn) {
  var cache = {}
  return (...rest) => {
    var arg s= JSON.stringify(rest)
    return cache[args] || cache[args] = fn.apply(this, rest)
  }
}
const once = (fn) => {
  let res, isFirst = true
  return function (...args) {
    if (!isFirst) return res
    res = fn.call(this, ...args)
    isFirst = false
    return res
  }
}
const f = (x) => x;
const onceF = once(f);
//=> 3
onceF(3);
//=> 3
onceF(4);
```

## 10.TS 练习体操之 Equal

```ts
type isEqual<A, B = A> = (<T>() => T extends A ? 1 : 2) extends <T>() => T extends B ? 1 : 2
  ? true
  : false;
type E11 = isEqual<1, 2>; // false
type E12 = isEqual<'string', string>; // false
type E13 = isEqual<string, string>; // true
```

## 12.TS 练习之 Pick

```ts
type PickMy<T, K extends keyof T> = {
  [P in K]?: T[P];
};
type PickMy1<T, K> = {
  [P in keyof T as P extends K ? P : T[P] extends {} ? P : never]: T[P];
};

type P1 = {
  name: string;
  age?: number;
};
type P2 = PickMy1<P1, 'name'>;
```

## 23 TS 手写 IndexToUnion 索引转联合类型

```ts
type NN1 = {
  age: number;
  name: string;
};
// expected
type NN2 =
  | {
      age: number;
    }
  | {
      name: string;
    };

type IndexToUnion<T> = {
  [P in keyof T]: {
    [K in P]: T[K];
  };
}[keyof T];

type NN3 = IndexToUnion<NN1>;
const tt3: NN3 = { age: '22' };
```

## 25 axios 以及拦截器

```js
// 添加请求拦截器
axios.interceptors.request.use(
  function (config) {
    // 在发送请求之前做些什么
    return config;
  },
  function (error) {
    // 对请求错误做些什么
    return Promise.reject(error);
  },
);
```

移除拦截器

```js
const myInterceptor = axios.interceptors.request.use(function () {
  /*...*/
});
axios.interceptors.request.eject(myInterceptor);
```

## 29 对象数组去重

## 34.红灯 3 秒亮一次，黄灯 2 秒亮一次，绿灯 1 秒亮一次；如何让三个灯不断交替重复亮灯？

要求：用 Promise 实现

```js
function red() {
  console.log('red');
}
function green() {
  console.log('green');
}
function yellow() {
  console.log('yellow');
}

function sleep(fn, delay) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve();
      fn();
    }, delay);
  });
}

function main() {
  return Promise.resolve()
    .then(() => {
      return sleep(red, 3000);
    })
    .then(() => {
      return sleep(yellow, 2000);
    })
    .then(() => {
      return sleep(green, 2000);
    })
    .then(() => main());
}
main();

// 第二种方式
async function main2() {
  while (true) {
    await sleep(red, 3000);
    await sleep(yellow, 2000);
    await sleep(green, 2000);
  }
}
```

## 35 联合转交叉类型

```ts
type Fork = { name: string } | { age: number };
type Fork2 = {
  name: string;
  age: number;
};

type UnionToFork<T> = (T extends T ? (x: T) => unknown : never) extends (x: infer R) => unknown
  ? R
  : never;
type Fork3 = UnionToFork<Fork>;
const fork3: Fork3 = { name: 'ccc', age: 222 };
```

## 参考

- [面试官不要再问我 axios 了？我能手写简易版的 axios](https://mp.weixin.qq.com/s/nmKU-Z1Ewc75HH0NxgvcCw)
- [一文帮你搞定 90% 的 JS 手写题](https://mp.weixin.qq.com/s/uKPVedfQkgEPYoRUtwyeQQ)
